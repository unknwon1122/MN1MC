---// üí† J4ROT MENU (FINAL FIX + CLOSE BUTTON + ANTI ERROR + 100% TAMPIL)

repeat task.wait() until game:IsLoaded()

--// Proteksi error biar gak diam-diam crash
local function safeExec(func)
	local success, result = pcall(func)
	if not success then
		warn("[J4ROT ERROR] ‚ûú", result)
		game.StarterGui:SetCore("SendNotification", {
			Title = "‚ö†Ô∏è J4ROT PANEL ERROR",
			Text = tostring(result),
			Duration = 6
		})
	end
	return success, result
end

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UIS = game:GetService("UserInputService")
local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

--// GUI Utama
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "J4ROT_MENU"
ScreenGui.ResetOnSpawn = false

--// Fix parent biar GUI pasti muncul
if gethui then
	ScreenGui.Parent = gethui()
elseif syn and syn.protect_gui then
	syn.protect_gui(ScreenGui)
	ScreenGui.Parent = game:GetService("CoreGui")
else
	ScreenGui.Parent = game:GetService("CoreGui")
end

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 350, 0, 400)
MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MainFrame.BackgroundTransparency = 0.35
MainFrame.Active = true
MainFrame.Draggable = false
MainFrame.Parent = ScreenGui
Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 12)

--// Judul
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 35)
Title.BackgroundTransparency = 1
Title.Text = "üí† J4ROT Panel"
Title.Font = Enum.Font.GothamBlack
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 18
Title.Parent = MainFrame

--// Tombol Minimize
local MinBtn = Instance.new("TextButton")
MinBtn.Size = UDim2.new(0, 30, 0, 30)
MinBtn.Position = UDim2.new(1, -70, 0, 5)
MinBtn.BackgroundTransparency = 1
MinBtn.Text = "-"
MinBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
MinBtn.Font = Enum.Font.GothamBold
MinBtn.TextSize = 20
MinBtn.Parent = MainFrame

--// Tombol Close (‚ùå)
local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0, 30, 0, 30)
CloseBtn.Position = UDim2.new(1, -35, 0, 5)
CloseBtn.BackgroundTransparency = 1
CloseBtn.Text = "X"
CloseBtn.TextColor3 = Color3.fromRGB(255, 60, 60)
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.TextSize = 20
CloseBtn.Parent = MainFrame

--// ScrollFrame (bisa di scroll di HP & PC)
local ScrollFrame = Instance.new("ScrollingFrame")
ScrollFrame.Size = UDim2.new(1, -10, 1, -45)
ScrollFrame.Position = UDim2.new(0, 5, 0, 40)
ScrollFrame.BackgroundTransparency = 1
ScrollFrame.ScrollBarThickness = 6
ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
ScrollFrame.ScrollingEnabled = true
ScrollFrame.Active = true
ScrollFrame.Selectable = true
ScrollFrame.ClipsDescendants = true
ScrollFrame.Parent = MainFrame

local UIListLayout = Instance.new("UIListLayout", ScrollFrame)
UIListLayout.Padding = UDim.new(0, 6)
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

--// üîó DAFTAR LIST EXEC (isi sesukamu)
local SystemList = {
	["‚õ∞Ô∏è YAHAYUK"] = "https://raw.githubusercontent.com/unknwon1122/0081083729/refs/heads/main/YAHAYUK1.txt",
	["üí® BOOST FPS"] = [[loadstring(game:HttpGet("https://pastefy.app/8XD6d1eM/raw"))()]],
	["üìçSV POSISI"] = "https://pastefy.app/JLgzGLk1/raw",
	["üíæKORDINAT MAKER"] = [[loadstring(game:HttpGetAsync("https://pastefy.app/476wUHku/raw"))()]],
    ["‚õ∞Ô∏è SUNNY"] =
"https://raw.githubusercontent.com/unknwon1122/0081083729/refs/heads/main/SUNNY1.txt"
}

for name, url in pairs(SystemList) do
	local Btn = Instance.new("TextButton")
	Btn.Size = UDim2.new(1, -10, 0, 35)
	Btn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
	Btn.BackgroundTransparency = 0.4
	Btn.Text = name
	Btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	Btn.Font = Enum.Font.Gotham
	Btn.TextSize = 15
	Btn.Parent = ScrollFrame
	Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 8)

	Btn.MouseButton1Click:Connect(function()
		safeExec(function()
			if string.find(url, "loadstring") then
				local func = loadstring(url)
				func()
			else
				loadstring(game:HttpGet(url))()
			end
		end)
	end)
end

UIListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
	ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, UIListLayout.AbsoluteContentSize.Y)
end)

--// Tombol Restore (kiri tengah)
local RestoreBtn = Instance.new("ImageButton")
RestoreBtn.Size = UDim2.new(0, 50, 0, 50)
RestoreBtn.Position = UDim2.new(0, 10, 0.5, -25)
RestoreBtn.AnchorPoint = Vector2.new(0, 0.5)
RestoreBtn.BackgroundTransparency = 0.4
RestoreBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
RestoreBtn.Image = "rbxassetid://76235443910424"
RestoreBtn.Visible = false
RestoreBtn.Parent = ScreenGui
Instance.new("UICorner", RestoreBtn).CornerRadius = UDim.new(1, 0)

local MText = Instance.new("TextLabel")
MText.Size = UDim2.new(1, 0, 1, 0)
MText.BackgroundTransparency = 1
MText.Text = "M"
MText.TextColor3 = Color3.new(1, 1, 1)
MText.Font = Enum.Font.GothamBold
MText.TextSize = 20
MText.Parent = RestoreBtn

--// Animasi minimize / restore
local minimized = false

local function minimize()
	if minimized then return end
	minimized = true
	local tween = TweenService:Create(MainFrame, TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
		Size = UDim2.new(0, 0, 0, 0),
		Position = UDim2.new(0.5, 0, 0.5, 0)
	})
	tween:Play()
	tween.Completed:Connect(function()
		MainFrame.Visible = false
		RestoreBtn.Visible = true
	end)
end

local function restore()
	if not minimized then return end
	minimized = false
	MainFrame.Visible = true
	RestoreBtn.Visible = false
	local tween = TweenService:Create(MainFrame, TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
		Size = UDim2.new(0, 350, 0, 400),
		Position = UDim2.new(0.5, 0, 0.5, 0)
	})
	tween:Play()
end

MinBtn.MouseButton1Click:Connect(minimize)
RestoreBtn.MouseButton1Click:Connect(restore)
CloseBtn.MouseButton1Click:Connect(function()
	ScreenGui:Destroy()
end)

--// Sistem drag (HP & PC)
local dragging = false
local dragStart, startPos, dragInput

MainFrame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = MainFrame.Position
	end
end)

MainFrame.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

UIS.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		local delta = input.Position - dragStart
		MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end
end)

MainFrame.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = false
	end
end)// üí† J4ROT MENU (FINAL FIX + CLOSE BUTTON)
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UIS = game:GetService("UserInputService")
local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

--// GUI Utama
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "J4ROT_MENU"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = PlayerGui

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 350, 0, 400)
MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MainFrame.BackgroundTransparency = 0.35
MainFrame.Active = true
MainFrame.Draggable = false
MainFrame.Parent = ScreenGui
Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 12)

--// Judul
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 35)
Title.BackgroundTransparency = 1
Title.Text = "üí† J4ROT Panel"
Title.Font = Enum.Font.GothamBlack
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 18
Title.Parent = MainFrame

--// Tombol Minimize
local MinBtn = Instance.new("TextButton")
MinBtn.Size = UDim2.new(0, 30, 0, 30)
MinBtn.Position = UDim2.new(1, -70, 0, 5)
MinBtn.BackgroundTransparency = 1
MinBtn.Text = "-"
MinBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
MinBtn.Font = Enum.Font.GothamBold
MinBtn.TextSize = 20
MinBtn.Parent = MainFrame

--// Tombol Close (‚ùå)
local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0, 30, 0, 30)
CloseBtn.Position = UDim2.new(1, -35, 0, 5)
CloseBtn.BackgroundTransparency = 1
CloseBtn.Text = "X"
CloseBtn.TextColor3 = Color3.fromRGB(255, 60, 60)
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.TextSize = 20
CloseBtn.Parent = MainFrame

--// ScrollFrame (bisa di scroll di HP & PC)
local ScrollFrame = Instance.new("ScrollingFrame")
ScrollFrame.Size = UDim2.new(1, -10, 1, -45)
ScrollFrame.Position = UDim2.new(0, 5, 0, 40)
ScrollFrame.BackgroundTransparency = 1
ScrollFrame.ScrollBarThickness = 6
ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
ScrollFrame.ScrollingEnabled = true
ScrollFrame.Active = true
ScrollFrame.Selectable = true
ScrollFrame.ClipsDescendants = true
ScrollFrame.Parent = MainFrame

local UIListLayout = Instance.new("UIListLayout", ScrollFrame)
UIListLayout.Padding = UDim.new(0, 6)
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

--// üîó DAFTAR LIST EXEC (isi sesukamu)
local SystemList = {
	["‚õ∞Ô∏è YAHAYUK"] = "https://raw.githubusercontent.com/unknwon1122/0081083729/refs/heads/main/YAHAYUK1.txt",
	["üí® BOOST FPS"] = [[loadstring(game:HttpGet("https://pastefy.app/8XD6d1eM/raw"))()]],
	["üìçSV POSISI"] = "https://pastefy.app/JLgzGLk1/raw",
	["üíæKORDINAT MAKER"] = [[loadstring(game:HttpGetAsync("https://pastefy.app/476wUHku/raw"))()]]
}

for name, url in pairs(SystemList) do
	local Btn = Instance.new("TextButton")
	Btn.Size = UDim2.new(1, -10, 0, 35)
	Btn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
	Btn.BackgroundTransparency = 0.4
	Btn.Text = name
	Btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	Btn.Font = Enum.Font.Gotham
	Btn.TextSize = 15
	Btn.Parent = ScrollFrame
	Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 8)

	Btn.MouseButton1Click:Connect(function()
		loadstring(game:HttpGet(url))()
	end)
end

UIListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
	ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, UIListLayout.AbsoluteContentSize.Y)
end)

--// Tombol Restore (kiri tengah)
local RestoreBtn = Instance.new("ImageButton")
RestoreBtn.Size = UDim2.new(0, 50, 0, 50)
RestoreBtn.Position = UDim2.new(0, 10, 0.5, -25)
RestoreBtn.AnchorPoint = Vector2.new(0, 0.5)
RestoreBtn.BackgroundTransparency = 0.4
RestoreBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
RestoreBtn.Image = "rbxassetid://76235443910424"
RestoreBtn.Visible = false
RestoreBtn.Parent = ScreenGui
Instance.new("UICorner", RestoreBtn).CornerRadius = UDim.new(1, 0)

local MText = Instance.new("TextLabel")
MText.Size = UDim2.new(1, 0, 1, 0)
MText.BackgroundTransparency = 1
MText.Text = "M"
MText.TextColor3 = Color3.new(1, 1, 1)
MText.Font = Enum.Font.GothamBold
MText.TextSize = 20
MText.Parent = RestoreBtn

--// Animasi minimize / restore
local minimized = false

local function minimize()
	if minimized then return end
	minimized = true
	local tween = TweenService:Create(MainFrame, TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
		Size = UDim2.new(0, 0, 0, 0),
		Position = UDim2.new(0.5, 0, 0.5, 0)
	})
	tween:Play()
	tween.Completed:Connect(function()
		MainFrame.Visible = false
		RestoreBtn.Visible = true
	end)
end

local function restore()
	if not minimized then return end
	minimized = false
	MainFrame.Visible = true
	RestoreBtn.Visible = false
	local tween = TweenService:Create(MainFrame, TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
		Size = UDim2.new(0, 350, 0, 400),
		Position = UDim2.new(0.5, 0, 0.5, 0)
	})
	tween:Play()
end

MinBtn.MouseButton1Click:Connect(minimize)
RestoreBtn.MouseButton1Click:Connect(restore)
CloseBtn.MouseButton1Click:Connect(function()
	ScreenGui:Destroy()
end)

--// Sistem drag (HP & PC)
local dragging = false
local dragStart, startPos, dragInput

MainFrame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = MainFrame.Position
	end
end)

MainFrame.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

UIS.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		local delta = input.Position - dragStart
		MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end
end)
